
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://defra.github.io/ffc-development-guide/development-patterns/helm-charts/">
      
      
        <link rel="prev" href="../containers/">
      
      
        <link rel="next" href="../probes/">
      
      
        
      
      
      <link rel="icon" href="../../img/code-black.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>Helm charts - FCP Development Guide</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.618322db.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#helm-charts" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="FCP Development Guide" class="md-header__button md-logo" aria-label="FCP Development Guide" data-md-component="logo">
      
  <img src="../../img/code-white.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            FCP Development Guide
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Helm charts
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/DEFRA/ffc-development-guide" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="FCP Development Guide" class="md-nav__button md-logo" aria-label="FCP Development Guide" data-md-component="logo">
      
  <img src="../../img/code-white.png" alt="logo">

    </a>
    FCP Development Guide
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/DEFRA/ffc-development-guide" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Getting Started
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/platform/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Understand the Platform
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/cicd/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Understand CI/CD approach
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/arrange-access/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Arrange access to resources
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Setup your local development environment
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Setup your local development environment
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../local-development-setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Windows
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Windows
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../local-development-setup/install-wsl/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Install Windows Subsystem for Linux (WSL)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../local-development-setup/wsl/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Update WSL configuration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../local-development-setup/setup-sudoers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Add user to sudoers file
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Mac
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Mac
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../local-development-setup/setup-macos-command-line-tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Setup command line tools
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../local-development-setup/mac-setup-scripts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Mac setup Scripts
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Common
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Common
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../local-development-setup/install-docker-desktop/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Install Docker Desktop
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../local-development-setup/install-vs-code/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Install Visual Studio Code
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../local-development-setup/install-neostandard/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Install neostandard
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../local-development-setup/install-node-version-manager/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Install Node Version Manager (NVM)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../local-development-setup/install-dotnet-sdk/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Install .NET SDK
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../local-development-setup/install-sonarqube/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Install SonarQube for IDE
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../local-development-setup/install-kubectl/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Install kubectl
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../local-development-setup/install-kubelogin/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Install kubelogin
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../local-development-setup/install-helm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Install Helm
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../local-development-setup/install-azure-cli/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Install Azure CLI
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../local-development-setup/install-snyk/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Install Snyk CLI
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../local-development-setup/install-github/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Install GitHub CLI
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../local-development-setup/install-openvpn/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Install OpenVPN
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../local-development-setup/sign-commits/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Setup commit signing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Create a new service
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Create a new service
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../create-a-new-service/choose-a-technology/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Choose a technology
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../create-a-new-service/github/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Create a source code repository
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../create-a-new-service/conventions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Repository conventions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../create-a-new-service/jenkins/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Setup a Jenkins CI pipeline
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../create-a-new-service/ado/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Setup an Azure DevOps CD pipeline
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../create-a-new-service/deploy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Deploy a service
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Development patterns
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Development patterns
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../containers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Containers
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Helm charts
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Helm charts
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#source-control" class="md-nav__link">
    <span class="md-ellipsis">
      
        Source control
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#helm-chart-library" class="md-nav__link">
    <span class="md-ellipsis">
      
        Helm chart library
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#helm-chart-repository" class="md-nav__link">
    <span class="md-ellipsis">
      
        Helm chart repository
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#labelling-resources" class="md-nav__link">
    <span class="md-ellipsis">
      
        Labelling resources
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Labelling resources">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#required-labels" class="md-nav__link">
    <span class="md-ellipsis">
      
        Required labels
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#selectors" class="md-nav__link">
    <span class="md-ellipsis">
      
        Selectors
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources" class="md-nav__link">
    <span class="md-ellipsis">
      
        Resources
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Resources">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#declaring-a-profile" class="md-nav__link">
    <span class="md-ellipsis">
      
        Declaring a profile
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resource-quotas" class="md-nav__link">
    <span class="md-ellipsis">
      
        Resource quotas
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resource-profiling" class="md-nav__link">
    <span class="md-ellipsis">
      
        Resource profiling
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#priority-classes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Priority classes
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Priority classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#high-1000" class="md-nav__link">
    <span class="md-ellipsis">
      
        high (1000)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#default-600" class="md-nav__link">
    <span class="md-ellipsis">
      
        default (600)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#low-200" class="md-nav__link">
    <span class="md-ellipsis">
      
        low (200)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resource-profile-impact" class="md-nav__link">
    <span class="md-ellipsis">
      
        Resource profile impact
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../probes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Health probes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Configuration and secrets
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../events-and-messages/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Events and messages
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../databases/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Databases
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cache/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Caching
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_8" >
        
          
          <label class="md-nav__link" for="__nav_5_8" id="__nav_5_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Authentication
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Authentication
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../authentication/defra-identity/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Defra Identity
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../authentication/entra/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Entra
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../analytics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Analytics
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../shared-assets/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Shared assets
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../version-control/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Version control
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../documentation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Documentation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../code-review/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Code review
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Release notes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#source-control" class="md-nav__link">
    <span class="md-ellipsis">
      
        Source control
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#helm-chart-library" class="md-nav__link">
    <span class="md-ellipsis">
      
        Helm chart library
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#helm-chart-repository" class="md-nav__link">
    <span class="md-ellipsis">
      
        Helm chart repository
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#labelling-resources" class="md-nav__link">
    <span class="md-ellipsis">
      
        Labelling resources
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Labelling resources">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#required-labels" class="md-nav__link">
    <span class="md-ellipsis">
      
        Required labels
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#selectors" class="md-nav__link">
    <span class="md-ellipsis">
      
        Selectors
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources" class="md-nav__link">
    <span class="md-ellipsis">
      
        Resources
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Resources">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#declaring-a-profile" class="md-nav__link">
    <span class="md-ellipsis">
      
        Declaring a profile
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resource-quotas" class="md-nav__link">
    <span class="md-ellipsis">
      
        Resource quotas
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resource-profiling" class="md-nav__link">
    <span class="md-ellipsis">
      
        Resource profiling
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#priority-classes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Priority classes
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Priority classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#high-1000" class="md-nav__link">
    <span class="md-ellipsis">
      
        high (1000)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#default-600" class="md-nav__link">
    <span class="md-ellipsis">
      
        default (600)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#low-200" class="md-nav__link">
    <span class="md-ellipsis">
      
        low (200)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resource-profile-impact" class="md-nav__link">
    <span class="md-ellipsis">
      
        Resource profile impact
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="helm-charts">Helm charts</h1>
<p>Helm charts allow multiple Kubernetes resource definitions to be deployed and un-deployed as a single unit.</p>
<h2 id="source-control">Source control</h2>
<ul>
<li>Helm charts are source controlled in the same repository as the microservice they relate to</li>
<li>Helm charts are saved in a <code>helm</code> directory and named the same as the repository. For example, <code>./helm/ffc-demo-web</code> directory</li>
<li>Helm chart versions are automatically updated by CI in line with the application version</li>
</ul>
<h2 id="helm-chart-library">Helm chart library</h2>
<ul>
<li>to keep Helm charts DRY, the <a href="https://github.com/DEFRA/ffc-helm-library">FCP Helm Chart Library</a> is used as a base for all resource definitions</li>
<li>consuming Helm charts only need to define where there is variation from the base Helm chart</li>
<li>the library helps teams abstract complexity of Kubernetes resource definitions as well as providing a consistent approach to Helm chart development and container security</li>
</ul>
<blockquote>
<p>Note: For services using ADP, ADP has it's own Helm chart library for both <a href="https://github.com/DEFRA/adp-helm-library">application</a> and <a href="https://github.com/DEFRA/adp-aso-helm-library">infrastructure</a>.</p>
</blockquote>
<h2 id="helm-chart-repository">Helm chart repository</h2>
<ul>
<li>Helm charts are published by CI to a Helm chart repository within <a href="https://azure.microsoft.com/en-us/products/container-registry/">Azure Container Registry</a></li>
<li>Helm charts are only published on a main branch build</li>
<li>Helm charts are automatically versioned by CI pipeline to be consistent with the application version</li>
<li>Helm charts for in flight Pull Requests are not published</li>
</ul>
<h2 id="labelling-resources">Labelling resources</h2>
<p>Labels can be added to Kubernetes resources to categorise and query objects.</p>
<p>In order to take full advantage of using labels, they should be applied on every resource object within a Helm chart. i.e. all deployments, services, ingresses etc.</p>
<p>When using the <a href="https://github.com/DEFRA/ffc-helm-library">FCP Helm Chart Library</a>, these labels are automatically applied to all resource objects.</p>
<h3 id="required-labels">Required labels</h3>
<p>Each Helm chart templated resource should have the below labels. Example placeholder references to the <code>values.yaml</code> file are provided.</p>
<pre><code class="language-go">metadata:
  labels:
    app: {{ quote .Values.namespace }}
    app.kubernetes.io/name: {{ quote .Values.name }}
    app.kubernetes.io/instance: {{ .Release.Name }}
    app.kubernetes.io/version: {{ quote .Values.labels.version }}
    app.kubernetes.io/component: {{ quote .Values.labels.component }}
    app.kubernetes.io/part-of: {{ quote .Values.namespace }}
    app.kubernetes.io/managed-by: {{ .Release.Service }}
    helm.sh/chart: {{ .Chart.Name }}-{{ .Chart.Version | replace &quot;+&quot; &quot;_&quot; }}
    environment: {{ quote .Values.environment }}
</code></pre>
<blockquote>
<p>Note: <code>Deployment</code> resource objects should have two sets of labels, one for the actual deployment and another for the pod template the deployment manages.</p>
</blockquote>
<h2 id="selectors">Selectors</h2>
<p>Services selectors should be matched by app and name. Selectors should be consistent once set, otherwise updates to Helm charts will be rejected.</p>
<pre><code class="language-go">selector:
  app: {{ quote .Values.name }}
  app.kubernetes.io/name: {{ quote .Values.name }}
</code></pre>
<h2 id="resources">Resources</h2>
<p>Predictable demands are important to help Kubernetes find the right place for a pod within a cluster. When it comes to resources such as a CPU and memory, understanding the resource needs of a pod will help Kubernetes allocate the pod to the most appropriate Node and generally improve the stability of the cluster.</p>
<h3 id="declaring-a-profile">Declaring a profile</h3>
<ul>
<li>all pods declare both a <code>request</code> and <code>limit</code> value for CPU and memory</li>
<li>pods with consistent usage patterns are run as<code>guaranteed</code> ie equal <code>request</code> and <code>limit</code> values</li>
<li>pods with spiky usage patterns can be run as <code>burstable</code> ie <code>request</code> lower than <code>limit</code> values</li>
<li>pods without <code>limit</code> values or <code>request</code> values are run as <code>best-effort</code>.  These are not used in FCP as they can cause instability in the cluster</li>
</ul>
<h3 id="resource-quotas">Resource quotas</h3>
<p>Clusters will limit available resources within a service's namespace using a <a href="https://kubernetes.io/docs/concepts/policy/resource-quotas/"><code>ResourceQuota</code></a>.</p>
<p>Teams should frequently review the resource usage of their pods and adjust the <code>ResourceQuota</code> accordingly.</p>
<blockquote>
<p>The resource quota should cover all pods running at their limit values at full level of replicas.</p>
</blockquote>
<p>The quota is deployed by the FCP Platform's <a href="https://dev.azure.com/defragovuk/DEFRA-FFC/_build?definitionId=2776"><code>platform-aks-configuration</code></a> pipeline.</p>
<h3 id="resource-profiling">Resource profiling</h3>
<p>Performance testing an end to end service is the only way to fully understand required resource needs.  Teams should ensure a suitable performance test strategy is in place.</p>
<h2 id="priority-classes">Priority classes</h2>
<p>FCP Platform has three <a href="https://kubernetes.io/docs/concepts/scheduling-eviction/pod-priority-preemption/">priority classes</a>. </p>
<p>Priority indicates the importance of a pod relative to other pods. If a pod cannot be scheduled, the scheduler tries to pre-empt (evict) lower priority pods to make scheduling of the pending pod possible.</p>
<p>In the event of over utilisation of a cluster, Kubernetes will start to kill lower priority pods first to maintain stability.</p>
<h3 id="high-1000"><code>high</code> (1000)</h3>
<p>Reserved primarily for customer facing or critical workload pods.</p>
<h3 id="default-600"><code>default</code> (600)</h3>
<p>Default option suitable for most pods.</p>
<h3 id="low-200"><code>low</code> (200)</h3>
<p>For pods where downtime is more tolerable.</p>
<p>When using the <a href="https://github.com/DEFRA/ffc-helm-library">FCP Helm Chart Library</a>, the <code>Default</code> priority class is automatically applied to all pods.  This value can be overwritten by adding the below to the <code>values.yaml</code> file.</p>
<pre><code class="language-go">deployment:
  priorityClassName: high
</code></pre>
<h3 id="resource-profile-impact">Resource profile impact</h3>
<p>In the event a cluster has to make a choice between killing one of two services sharing the same priority level, the resource profile configuration will influence which is killed in the order below.
  1. Best effort
  2. Burstable
  3. Guaranteed</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
    
  </body>
</html>